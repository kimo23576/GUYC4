<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>الرئيسية - الإستمارة الذكية لتسجيل الأضرار</title>
  <!-- Font Awesome للأيقونات -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- خط "Cairo" -->
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    /* المتغيرات الأساسية */
    :root {
      --primary-color: #1B2631;
      --secondary-color: #212F3D;
      --accent-color: #F1C40F;
      --bg-color: #F5F0E1;
      --section-bg: #2C3E50;
      --input-bg: #fff;
      --text-color: #F1C40F;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Cairo', sans-serif; }
    body { background: var(--bg-color); color: var(--text-color); line-height: 1.6; padding-bottom: 100px; }
    header {
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      padding: 15px;
      position: relative;
    }
    header img { max-height: 80px; vertical-align: middle; }
    nav { display: inline-block; margin-left: 20px; }
    nav a {
      color: var(--accent-color);
      text-decoration: none;
      margin: 0 10px;
      font-size: 1.1rem;
    }
    /* أيقونة التسجيل/المستخدم في أعلى اليمين */
    .reg-icon {
      position: absolute;
      top: 15px;
      right: 20px;
      font-size: 1.8rem;
    }
    .reg-icon a { color: var(--accent-color); text-decoration: none; }
    .container {
      width: 90%;
      max-width: 1200px;
      margin: 20px auto;
      background: var(--section-bg);
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.3);
      color: var(--accent-color);
    }
    h1, h2 { margin-bottom: 15px; }
    /* نموذج الإستمارة الذكية (الجزء الأصلي) */
    .input-group { margin-bottom: 15px; }
    .input-group label { display: block; margin-bottom: 5px; font-weight: bold; }
    input, textarea, select {
      width: 100%;
      padding: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
      background: var(--input-bg);
      font-size: 1rem;
      margin-bottom: 5px;
    }
    button {
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      background: var(--primary-color);
      color: var(--accent-color);
      cursor: pointer;
      transition: background 0.3s ease;
      margin: 5px 0;
    }
    button:hover { background: var(--secondary-color); }
    footer {
      background: var(--primary-color);
      color: #fff;
      text-align: center;
      padding: 15px;
      margin-top: 20px;
      border-top: 2px solid var(--accent-color);
    }
    /* النوافذ المنبثقة (التسجيل والدخول وإدارة الملفات) */
    .modal {
      display: none;
      position: fixed;
      z-index: 100;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.5);
    }
    .modal-content {
      background: #fff;
      margin: 10% auto;
      padding: 20px;
      border: 1px solid #888;
      width: 90%;
      max-width: 500px;
      border-radius: 10px;
      text-align: center;
      direction: rtl;
    }
    .modal-content h2 { color: var(--primary-color); margin-bottom: 15px; }
    .close {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
    }
    .close:hover { color: #000; }
    /* أيقونة عائمة للوصول السريع لإدارة الملف */
    .floating-icon {
      position: fixed;
      bottom: 20px;
      left: 20px;
      background: var(--accent-color);
      color: var(--primary-color);
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.8rem;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
      z-index: 101;
    }
  </style>
</head>
<body>
  <!-- الهيدر مع قائمة التنقل وأيقونة التسجيل -->
  <header>
    <img src="https://guyc-ye.com/wp-content/uploads/2024/05/GUYC-Log33o-copy.png" alt="شعار الاتحاد">
    <nav>
      <a href="index.html">الرئيسية</a>
      <a href="manage.html">إدارة الملفات</a>
      <a href="track.html">متابعة الطلب</a>
      <a href="auth.html">تسجيل الدخول</a>
    </nav>
    <div class="reg-icon">
      <!-- يمكن أن يؤدي الضغط هنا أيضًا إلى صفحة التسجيل/الدخول -->
      <a href="auth.html" title="تسجيل/دخول"><i class="fas fa-user-plus"></i></a>
    </div>
  </header>

  <!-- المحتوى الرئيسي: النظام الأصلي مع الإستمارة الذكية -->
  <div class="container">
    <h1>الإستمارة الذكية لتسجيل الأضرار والخسائر</h1>
    <p>يرجى تسجيل الدخول أو إنشاء حساب للبدء في إعداد ملف المطالبة.</p>
    
    <!-- النوافذ المنبثقة للتسجيل والدخول (نفس النظام الأصلي) -->
    <!-- نافذة التسجيل -->
    <div id="registerModal" class="modal">
      <div class="modal-content">
        <span class="close" id="closeRegisterModal">&times;</span>
        <h2>تسجيل حساب جديد</h2>
        <form id="registerForm">
          <div class="input-group">
            <label>اسم المستخدم:</label>
            <input type="text" id="regUsername" placeholder="أدخل اسم المستخدم" required>
          </div>
          <div class="input-group">
            <label>البريد الإلكتروني:</label>
            <input type="email" id="regEmail" placeholder="أدخل البريد الإلكتروني" required>
          </div>
          <div class="input-group">
            <label>كلمة المرور:</label>
            <input type="password" id="regPassword" placeholder="أدخل كلمة المرور" required>
          </div>
          <div class="input-group">
            <label>تأكيد كلمة المرور:</label>
            <input type="password" id="regConfirmPassword" placeholder="أعد إدخال كلمة المرور" required>
          </div>
          <button type="submit">تسجيل</button>
        </form>
      </div>
    </div>
    <!-- نافذة الدخول -->
    <div id="loginModal" class="modal">
      <div class="modal-content">
        <span class="close" id="closeLoginModal">&times;</span>
        <h2>تسجيل الدخول</h2>
        <form id="loginForm">
          <div class="input-group">
            <label>اسم المستخدم:</label>
            <input type="text" id="loginUsername" placeholder="أدخل اسم المستخدم" required>
          </div>
          <div class="input-group">
            <label>كلمة المرور:</label>
            <input type="password" id="loginPassword" placeholder="أدخل كلمة المرور" required>
          </div>
          <button type="submit">دخول</button>
        </form>
      </div>
    </div>
    
    <!-- الإستمارة الذكية (تظهر بعد تسجيل الدخول) -->
    <div id="smartForm" style="display:none;">
      <div class="input-group">
        <label>اسم الشركة:</label>
        <input type="text" id="companyName" placeholder="أدخل اسم الشركة">
      </div>
      <div class="input-group">
        <label>رقم الملف:</label>
        <input type="text" id="claimFileNumber" placeholder="أدخل رقم الملف">
      </div>
      <div class="input-group">
        <!-- زر تسليم ملف المطالبة (يستخدم mailto لإرسال الملف) -->
        <button id="submitClaimBtn">تسليم ملف المطالبة</button>
        <!-- زر إدارة ملف المطالبة (يفتح نافذة إدارة الملف) -->
        <button id="manageClaimBtn">إدارة ملف المطالبة</button>
      </div>
    </div>
  </div>

  <!-- نافذة إدارة ملفات المطالبات (ضمن النظام الأصلي) -->
  <div id="fileManagementModal" class="modal">
    <div class="modal-content">
      <span class="close" id="closeFileManagementModal">&times;</span>
      <h2>إدارة ملف المطالبة</h2>
      <div class="input-group">
        <label>أدخل رقم الملف:</label>
        <input type="text" id="manageFileNumber" placeholder="أدخل رقم الملف">
      </div>
      <div class="input-group">
        <label>تفاصيل الملف وتحديثاته:</label>
        <textarea id="fileDetails" rows="4" placeholder="أدخل تفاصيل الملف هنا"></textarea>
      </div>
      <div class="input-group">
        <button id="sendUpdateBtn">إرسال التحديثات</button>
      </div>
      <p>حالة الملف: <strong id="fileStatus">قيد الدراسة</strong></p>
    </div>
  </div>

  <!-- أيقونة عائمة للوصول السريع إلى إدارة الملف -->
  <div id="floatingClaimIcon" class="floating-icon" title="متابعة الملف">
    <i class="fas fa-file-alt"></i>
  </div>

  <footer>
    <p>© 2025 الاتحاد العام للمقاولين اليمنيين - جميع الحقوق محفوظة</p>
  </footer>

  <!-- جافا سكريبت للتحكم في النوافذ والوظائف -->
  <script>
    // عناصر النوافذ الأساسية
    const registerModal = document.getElementById("registerModal");
    const loginModal = document.getElementById("loginModal");
    const fileManagementModal = document.getElementById("fileManagementModal");
    const smartForm = document.getElementById("smartForm");

    // فتح وإغلاق نوافذ التسجيل والدخول
    document.getElementById("openRegisterModal").onclick = () => { registerModal.style.display = "block"; };
    document.getElementById("openLoginModal").onclick = () => { loginModal.style.display = "block"; };
    document.getElementById("closeRegisterModal").onclick = () => { registerModal.style.display = "none"; };
    document.getElementById("closeLoginModal").onclick = () => { loginModal.style.display = "none"; };
    document.getElementById("closeFileManagementModal").onclick = () => { fileManagementModal.style.display = "none"; };

    // إغلاق النوافذ عند النقر خارج المحتوى
    window.onclick = function(event) {
      if (event.target == registerModal) { registerModal.style.display = "none"; }
      if (event.target == loginModal) { loginModal.style.display = "none"; }
      if (event.target == fileManagementModal) { fileManagementModal.style.display = "none"; }
    };

    // نظام تسجيل ودخول بسيط باستخدام localStorage (لأغراض تجريبية)
    let users = JSON.parse(localStorage.getItem("users")) || {};

    document.getElementById("registerForm").onsubmit = function(e) {
      e.preventDefault();
      const username = document.getElementById("regUsername").value;
      const email = document.getElementById("regEmail").value;
      const password = document.getElementById("regPassword").value;
      const confirmPassword = document.getElementById("regConfirmPassword").value;
      if (password !== confirmPassword) {
        alert("كلمتا المرور غير متطابقتين");
        return;
      }
      users[username] = { email, password };
      localStorage.setItem("users", JSON.stringify(users));
      alert("تم التسجيل بنجاح! يمكنك الآن تسجيل الدخول.");
      registerModal.style.display = "none";
    };

    document.getElementById("loginForm").onsubmit = function(e) {
      e.preventDefault();
      const username = document.getElementById("loginUsername").value;
      const password = document.getElementById("loginPassword").value;
      if (users[username] && users[username].password === password) {
        alert("تم تسجيل الدخول بنجاح!");
        loginModal.style.display = "none";
        smartForm.style.display = "block";
      } else {
        alert("خطأ في اسم المستخدم أو كلمة المرور.");
      }
    };

    // زر تسليم ملف المطالبة (mail to)
    document.getElementById("submitClaimBtn").onclick = function() {
      const fileNumber = document.getElementById("claimFileNumber").value;
      if (!fileNumber) {
        alert("يرجى إدخال رقم الملف قبل التسليم.");
        return;
      }
      window.location.href = "mailto:info@guyc-ye.com?subject=ملف المطالبة رقم " + encodeURIComponent(fileNumber) + "&body=تفاصيل المطالبة:";
    };

    // زر إدارة ملف المطالبة: فتح نافذة إدارة الملف وملء رقم الملف إن وجد
    document.getElementById("manageClaimBtn").onclick = function() {
      fileManagementModal.style.display = "block";
      const fileNum = document.getElementById("claimFileNumber").value;
      document.getElementById("manageFileNumber").value = fileNum;
    };

    // الأيقونة العائمة تفتح نافذة إدارة الملف
    document.getElementById("floatingClaimIcon").onclick = function() {
      fileManagementModal.style.display = "block";
    };

    // زر إرسال التحديثات في نافذة إدارة الملف
    document.getElementById("sendUpdateBtn").onclick = function() {
      const fileNum = document.getElementById("manageFileNumber").value;
      const details = document.getElementById("fileDetails").value;
      if (!fileNum) {
        alert("يرجى إدخال رقم الملف.");
        return;
      }
      if (!details) {
        alert("يرجى إدخال تفاصيل التحديث.");
        return;
      }
      window.location.href = "mailto:info@guyc-ye.com?subject=تحديث ملف المطالبة رقم " + encodeURIComponent(fileNum) + "&body=التحديثات: " + encodeURIComponent(details);
      alert("تم إرسال التحديثات. سيتم التواصل معك عند اكتمال المعاملة أو وجود أي ملاحظات.");
      fileManagementModal.style.display = "none";
    };
  </script>
</body>
</html>
